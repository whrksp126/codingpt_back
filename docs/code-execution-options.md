# 코드 실행 샌드박스 방식 비교

## 요구사항
- 백엔드 서버와 완전 격리
- 안전한 샌드박스 환경
- 사용자 코드 실행

## 옵션 1: Docker API 방식 (현재 구현)
**방식**: 매번 새로운 Docker 컨테이너 생성

### 장점
- ✅ 완전한 격리 (컨테이너 레벨)
- ✅ 리소스 제한 가능 (메모리, CPU)
- ✅ 네트워크 격리 가능
- ✅ 읽기 전용 파일시스템

### 단점
- ❌ Docker 소켓 마운트 필요 (보안 위험)
- ❌ 컨테이너 생성/삭제 오버헤드 (1-2초)
- ❌ 복잡한 구현
- ❌ 호스트 Docker 데몬 접근 가능

## 옵션 2: spawn + 리소스 제한 (간단한 방식)
**방식**: 같은 컨테이너 내에서 spawn 사용하되 리소스 제한

### 장점
- ✅ 구현 간단
- ✅ 빠른 실행 (오버헤드 없음)
- ✅ 추가 의존성 없음
- ✅ Docker 소켓 불필요

### 단점
- ❌ 격리 수준 낮음 (같은 컨테이너)
- ❌ 파일시스템 접근 가능
- ❌ 완전한 격리는 불가능

## 옵션 3: 별도 실행 컨테이너 서비스 (추천)
**방식**: docker-compose에 실행 전용 컨테이너 추가, HTTP API로 통신

### 장점
- ✅ 백엔드와 완전 분리
- ✅ Docker 소켓 마운트 불필요
- ✅ 실행 컨테이너만 재시작 가능
- ✅ 확장 가능 (여러 실행 컨테이너)

### 단점
- ⚠️ 추가 컨테이너 관리 필요
- ⚠️ HTTP 통신 오버헤드 (미미함)

## 옵션 4: 기존 방식 + 개선 (하이브리드)
**방식**: spawn 사용하되, 더 강한 제한과 모니터링

### 장점
- ✅ 구현 간단
- ✅ 빠른 실행
- ✅ 추가 보안 제한 가능

### 단점
- ❌ 완전한 격리는 불가능

## 추천: 옵션 3 (별도 실행 컨테이너)
가장 균형잡힌 방식입니다.

