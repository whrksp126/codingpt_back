FROM node:18-alpine

# Python 설치 (코드 실행을 위해)
RUN apk add --no-cache python3 py3-pip

WORKDIR /app

# package.json만 먼저 복사
COPY package*.json ./

# 실행 서버만 설치 (최소 의존성)
RUN npm install --only=production

# 실행 서버 코드 복사
COPY executor-server.js ./

EXPOSE 5200

CMD ["node", "executor-server.js"]

